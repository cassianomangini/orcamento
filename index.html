<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Orçamento • Artesópolis</title>
  <link href="https://fonts.googleapis.com/css2?family=Cabin:wght@400;700&family=Caveat:wght@700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
  <style>
    :root {
      --roxo: #9f6fff;
      --roxo-escuro: #3e2463;
      --roxo-pastel: #c7bbf7;
      --azul: #1e2337;
      --papel: #f7f3ef;
      --verde-whatsapp: #25d366;
      --radius: 1.7rem;
      --radius-sm: 0.9rem;
      --shadow-main: 0 8px 50px 0 #3e246340, 0 2px 12px 0 #0002;
      --font-base: 'Cabin', Arial, sans-serif;
      --font-title: 'Cabin', cursive;
      --transition: .18s cubic-bezier(.4,0,.2,1);
    }
    html, body {
      min-height: 100vh;
      background: var(--azul);
      font-family: var(--font-base);
      margin: 0;
      padding: 0;
      font-size: 15px;
    }
    body {
      background-image: url("data:image/svg+xml,%3Csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise' x='0' y='0'%3E%3CfeTurbulence type='fractalNoise' baseFr[...]
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      justify-content: center;
    }
    .orcamento-painel {
      background: var(--papel);
      border-radius: var(--radius);
      box-shadow: var(--shadow-main);
      max-width: 900px;
      width: 97vw;
      margin: 2.5rem auto;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      border: 3px solid var(--roxo-pastel);
      position: relative;
      z-index: 1;
    }
    .orcamento-banner-img {
      width: 100%;
      display: block;
      border-top-left-radius: var(--radius);
      border-top-right-radius: var(--radius);
      margin: 0 0 1.2rem 0;
      max-height: 300px;
      object-fit: cover;
      box-shadow: 0 4px 14px #1e2337a0;
    }
    .orcamento-title {
      font-family: var(--font-title);
      font-size: 2.8rem;
      color: var(--roxo);
      text-align: center;
      font-weight: 700;
      line-height: 1.2;
      text-shadow: 0 2px 14px #9f6fff44;
      filter: drop-shadow(0 3px 10px #9f6fff33);
      letter-spacing: .03em;
    }
    .orcamento-info, .orcamento-validade {
      background: #fff9;
      border-radius: var(--radius-sm);
      box-shadow: 0 2px 12px 0 #c7bbf722;
      font-family: var(--font-base);
      font-weight: 500;
      color: #3e2463;
      font-size: 1.2rem;
    }
    .orcamento-info {
      padding: 1.25rem 1.1rem 0.85rem 1.1rem;
      display: flex;
      flex-direction: column;
      gap: 0.95em;
      border-left: 4px solid var(--roxo);
      margin-bottom: 1.2rem;
      margin-top: 0.1rem;
    }
    .orcamento-info span {
      display: flex;
      align-items: center;
      gap: 0.75em;
      margin-bottom: 0.18em;
      font-size: 1em;
    }
    .orcamento-info .icon {
      width: 2.3em;
      height: 2.3em;
      opacity: 0.95;
      color: var(--roxo);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      filter: drop-shadow(0 1px 4px #9f6fff33);
    }
    .orcamento-info strong {
      font-weight: 700;
      color: var(--roxo-escuro);
    }
    .orcamento-info .client-badge {
      background: linear-gradient(90deg, #e3cfff 70%, #c7bbf7 100%);
      color: var(--roxo-escuro);
      border-radius: 0.8em;
      padding: 0.1em 0.7em;
      font-size: 1.2em;
      margin-left: 0.3em;
      font-family: var(--font-title);
      font-weight: 700;
      letter-spacing: 0.02em;
      display: flex;
      align-items: center;
      gap: 0.35em;
    }
    .orcamento-table {
      width: 100%;
      border-radius: var(--radius-sm);
      overflow-x: auto;
      margin: 0 auto;
      box-shadow: 0 2px 12px 0 #c7bbf710;
      border: 1.5px solid #e8e1fd;
      background: #f9f8ff;
    }
    .orcamento-table table {
      border-collapse: collapse;
      width: 100%;
      min-width: 700px;
      font-size: 1.16rem;
    }
    .orcamento-table th, .orcamento-table td {
      padding: 0.6em 0.6em;
      text-align: center;
      line-height: 2em;
    }
    .orcamento-table th {
      background: var(--roxo-pastel);
      color: var(--roxo-escuro);
      font-family: var(--font-base);
      font-weight: 700;
      border-bottom: 2px solid #b9a4e2;
      text-transform: uppercase;
      font-size: 1.04em;
      letter-spacing: 0.04em;
    }
    .orcamento-table tr:not(:last-child) td {
      border-bottom: 1px dashed #e4d6fa;
    }
    .orcamento-table td {
      color: #2e233b;
      background: transparent;
      vertical-align: middle;
      font-size: 0.94em;
    }
    .orcamento-link {
      background: var(--roxo);
      color: #fff;
      border-radius: 1.2em;
      padding: 0.32em 1.1em;
      font-weight: 700;
      font-size: 1em;
      text-decoration: none;
      box-shadow: 0 1px 7px #9f6fff2c;
      border: none;
      transition: background var(--transition), box-shadow var(--transition);
      cursor: pointer;
      display: inline-block;
    }
    .orcamento-link:hover {
      background: #623fae;
      box-shadow: 0 3px 18px #9f6fff44;
    }
    .input-qty {
      width: 54px;
      border: 1.5px solid #d1bcf3;
      border-radius: 0.6em;
      font-size: 1em;
      background: #fff;
      color: #2e233b;
      outline: none;
      text-align: center;
      transition: border var(--transition);
      padding: 0.28em 0;
    }
    .input-qty:focus {
      border-color: var(--roxo);
      background: #f7f3ef;
    }
    .input-price {
      width: 90px;
      border: none;
      background: transparent;
      pointer-events: none;
      font-weight: bold;
      cursor: default;
      text-align: center;
      color: #2e233b;
      font-size: 1em;
    }
    .orcamento-checkbox {
      width: 1.3em;
      height: 1.3em;
      accent-color: var(--roxo);
      cursor: pointer;
      margin: 0;
      transform: translateY(2px);
    }
    .orcamento-total-value {
      font-weight: 700;
      color: var(--roxo-escuro);
      background: #ece6ff;
      border-radius: 0.7em;
      padding: 0.16em 0.6em;
      font-size: 1.05em;
      box-shadow: 0 1px 7px #9f6fff2c;
      text-align: center;
    }
    .orcamento-totais {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 1.2em;
      font-size: 1em;
      padding-top: 0.7em;
      border-top: 2px dotted #d7c6ef;
      gap: 1em;
      flex-wrap: wrap;
    }
    .totais-esq, .totais-dir {
      flex: 1;
      display: flex;
      align-items: center;
      min-width: 210px;
    }
    .totais-esq { margin-left: 2.5em; justify-content: flex-start; }
    .totais-dir { margin-right: 2.5em; justify-content: flex-end; }
    .badge {
      background: linear-gradient(90deg, var(--roxo), var(--roxo-escuro) 90%);
      color: #fff;
      border-radius: 1em;
      padding: 0.18em 1.4em;
      font-weight: 700;
      box-shadow: 0 1px 7px #9f6fff22;
      font-size: 1.08em;
      margin-left: 0.7em;
      letter-spacing: 0.03em;
      font-family: var(--font-base);
      filter: drop-shadow(0 2px 8px #9f6fff33);
    }
    .badge.valor {
      font-size: 1.09em;
      font-family: var(--font-base);
      font-weight: 700;
      padding: 0.14em 1.7em;
      margin-left: 0.9em;
    }
    .orcamento-validade {
      margin-top: 1.6em;
      text-align: center;
      color: #8c7bcc;
      font-size: 1.21em;
      font-family: var(--font-title);
      font-weight: 600;
      letter-spacing: 0.02em;
      filter: drop-shadow(0 1px 6px #9f6fff33);
      box-shadow: none;
      border-radius: 0;
      background: transparent;
    }
    .orcamento-whatsapp {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 1.25em;
      gap: 0.6em;
    }
    .orcamento-whatsapp-btn {
      display: flex;
      align-items: center;
      gap: 0.6em;
      background: linear-gradient(90deg, #25d366 70%, #9f6fff 100%);
      color: #fff;
      border: none;
      border-radius: 2em;
      padding: 0.95em 2.2em 0.95em 1.8em;
      font-size: 1.22em;
      font-weight: 700;
      text-decoration: none;
      font-family: var(--font-base);
      box-shadow: 0 2px 18px #25d36633, 0 0px 7px #9f6fff22;
      cursor: pointer;
      transition: filter var(--transition), box-shadow var(--transition);
      outline: none;
      animation: pulse 1.8s infinite alternate;
    }
    .orcamento-whatsapp-btn:hover {
      filter: brightness(1.1);
      box-shadow: 0 0 11px #25d36677, 0 0 14px #9f6fff44;
      animation: none;
    }
    @keyframes pulse {
      from { box-shadow: 0 2px 18px #25d36633, 0 0px 7px #9f6fff22;}
      to { box-shadow: 0 0 29px #25d36677, 0 0 24px #9f6fff44;}
    }
    .orcamento-whatsapp-btn .icon {
      width: 2em;
      height: 2em;
      margin-bottom: 1px;
    }
    .orcamento-insta-link {
      color: var(--roxo-escuro);
      font-size: 1.2em;
      text-decoration: underline;
      margin-top: 0.3em;
      font-family: var(--font-title);
      letter-spacing: 0.02em;
      margin-bottom: 20px;
    }
    .orcamento-insta-link:hover {
      color: var(--roxo);
    }
    .footer {
      width: 100%;
      margin-top: 1.7rem;
      text-align: center;
      font-size: 1.17em;
      color: #8c7bcc;
      background: transparent;
      font-family: var(--font-title);
      letter-spacing: 0.02em;
      padding-bottom: 1.1rem;
      z-index: 0;
    }
    /* Responsivo */
    @media (max-width: 900px) {
      html, body { font-size: 15x; }
      .orcamento-painel { max-width: 99vw; }
      .orcamento-title { font-size: 2rem; }
      .orcamento-info { font-size: 1.08rem; }
      .orcamento-table table { min-width: 500px; font-size: 0.99rem; }
      .totais-esq, .totais-dir { min-width: 120px; margin-left: 0.8em; margin-right: 0.8em;}
      .orcamento-table th, .orcamento-table td { padding: 0.1em 0.1em; }
    }
    @media (max-width: 600px) {
      html, body { font-size: 12px; }
      .orcamento-title { font-size: 1.3rem; }
      .orcamento-info { font-size: 0.9em; }
      .orcamento-table table { min-width: 340px; }
      .totais-esq, .totais-dir { min-width: 70px; }
      .orcamento-whatsapp-btn { padding: 0.7em 1.3em 0.7em 1.0em; font-size: 0.85em; }
    }
    @media (max-width: 440px) {
      html, body { font-size: 12px; }
      .orcamento-title { font-size: 1.1rem; }
      .orcamento-info { font-size: 0.93em; }
      .orcamento-painel { padding: 0 0.2rem 0.7rem 0.2rem; }
      .orcamento-table th, .orcamento-table td { font-size: 0.6em; padding: 0.1em 0.1em; }
    }
  </style>
</head>
<body>
  <div class="orcamento-painel">
    <img class="orcamento-banner-img" src="https://hkembpwsrhpkfslwovzs.supabase.co/storage/v1/object/public/imagens/fundos/Captura%20de%20tela%202025-06-24%20074338.png" alt="Banner Artesópolis" />
    <div class="orcamento-title">Orçamento</div>
    <div class="orcamento-info">
      <span>
        <i class="ph ph-file-text icon" aria-label="Número"></i>
        <strong>Nº:</strong> 0825
      </span>
      <span>
        <i class="ph ph-user-circle icon" aria-label="Cliente"></i>
        <strong>Cliente:</strong>
        <span class="client-badge">
          <i class="ph ph-smiley-wink icon" aria-label="badge"></i>
          Juninho Maconheiro
        </span>
      </span>
      <span>
        <i class="ph ph-whatsapp-logo icon" aria-label="Telefone"></i>
        <strong>Telefone:</strong> (13) 99766-5510
      </span>
      <span>
        <i class="ph ph-calendar-blank icon" aria-label="Data"></i>
        <strong>Data:</strong> 24/06/2025
      </span>
    </div>
    <div class="orcamento-table">
      <table>
        <thead>
          <tr>
            <th></th>
            <th>Qtd</th>
            <th>Nome</th>
            <th>Inglês</th>
            <th>Medidas</th>
            <th>Link</th>
            <th>Valor Unit.</th>
            <th>Valor Total</th>
          </tr>
        </thead>
        <tbody id="itens-body"></tbody>
      </table>
    </div>
    <div class="orcamento-totais">
      <div class="totais-esq">
        <span>Total de Itens: <span class="badge" id="total-itens">0</span></span>
      </div>
      <div class="totais-dir">
        <span>Valor Total: <span class="badge valor" id="valor-total">R$ 0,00</span></span>
      </div>
      <br>
      <div class="totais-dir">
        <span>Taxa admnistrativa: <span class="badge valor" id="valor-total">R$ 500,00</span></span>
      </div>
    </div>
    <div class="orcamento-validade">
      Orçamento válido por 15 dias.
    </div>
    <div class="orcamento-whatsapp">
      <a class="orcamento-whatsapp-btn" id="whatsapp-link" target="_blank">
        <svg class="icon" viewBox="0 0 32 32"><circle fill="#fff" cx="16" cy="16" r="16"/><path d="M16 6.5a9.5 9.5 0 0 0-8.19 14.59L6.5 25.5l4.58-1.28A9.5 9.5 0 1 0 16 6.5zm5.42 13.08c-.23.65-1.35 1.2[...]
        Enviar pedido no WhatsApp
      </a>
      <a class="orcamento-insta-link" href="https://www.instagram.com/artesopolis" target="_blank">@artesopolis</a>
    </div>
  </div>
  <div class="footer">
    Artesópolis — Viaje na sua criatividade!<br>
    2025 — Todos os direitos reservados.
  </div>
  <script>
    const itens = [
  // ... [itens array permanece igual]
  {
    "qtd": 1,
    "nome": "Palheta de Guitarra",
    "en": "Guitar Pick",
    "medidas": "L 2.61 x A 3.05 x P 0.04 cm",
    "url": "https://makerworld.com/pt/models/857601-guitar-pick?from=search",
    "preco": 4.99,
    "ativo": true
  }
]
    function formatCurrency(val) {
      return val.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
    }

    // Função para gerar mensagem e link do WhatsApp
    function gerarMensagemWhatsapp() {
      const lista = itens
        .filter(item => item.ativo)
        .map(item => `• ${item.nome} (Qtd: ${item.qtd})`)
        .join('%0A');
      const msg = `Olá! Segue minha lista de pedido:%0A${lista}`;
      const numero = '5511997562871';
      return `https://wa.me/${numero}?text=${msg}`;
    }

    function renderTable() {
      const tbody = document.getElementById('itens-body');
      tbody.innerHTML = '';
      let totalItens = 0, valorTotal = 0;
      itens.forEach((item, idx) => {
        const valorLinha = item.qtd * item.preco;
        if (item.ativo) {
          totalItens += item.qtd;
          valorTotal += valorLinha;
        }
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>
            <input type="checkbox" class="orcamento-checkbox" ${item.ativo ? "checked" : ""} onchange="toggleAtivo(${idx}, this.checked)">
          </td>
          <td>
            <input type="number" class="input-qty" min="1" value="${item.qtd}" onchange="updateQty(${idx}, this.value)" ${item.ativo ? "" : "disabled"}>
          </td>
          <td>${item.nome}</td>
          <td>${item.en}</td>
          <td>${item.medidas}</td>
          <td><a href="${item.url}" class="orcamento-link" target="_blank">Ver</a></td>
          <td><input type="text" class="input-price" value="${formatCurrency(item.preco)}" readonly tabindex="-1"></td>
          <td class="orcamento-total-value">${formatCurrency(valorLinha)}</td>
        `;
        tbody.appendChild(tr);
      });
      document.getElementById('total-itens').textContent = totalItens;
      document.getElementById('valor-total').textContent = formatCurrency(valorTotal);

      // Atualiza o link do WhatsApp sempre que a tabela renderiza
      document.getElementById('whatsapp-link').href = gerarMensagemWhatsapp();
    }
    function updateQty(idx, value) {
      itens[idx].qtd = parseInt(value) || 1;
      renderTable();
    }
    function toggleAtivo(idx, checked) {
      itens[idx].ativo = checked;
      renderTable();
    }
    // Torna as funções globais para funcionar no onchange inline
    window.updateQty = updateQty;
    window.toggleAtivo = toggleAtivo;
    window.onload = renderTable;
  </script>
</body>
</html>
